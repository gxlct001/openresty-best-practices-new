# 目录

- [序](README.md)
- [目录](Table-of-Contents.md)
- [入门篇](README.md)
  - [OpenResty 简介](part-0-preface/intro.md)
  - [Socket 编程发展](part-0-preface/socket_evolution.md)
- [第一部分 Lua 和 LuaJIT](part-1-lua-luajit/synopsis.md)
  - [一，Lua 入门](part-1-lua-luajit/1-lua_basics/abstract.md)
    - [Lua 简介](part-1-lua-luajit/1-lua_basics/brief.md)
    - [Lua 环境搭建](part-1-lua-luajit/1-lua_basics/build_env.md)
    - [Lua 编辑器选择](part-1-lua-luajit/1-lua_basics/editor.md)
    - [基础数据类型](part-1-lua-luajit/1-lua_basics/class.md)
    - [表达式](part-1-lua-luajit/1-lua_basics/operator.md)
    - [控制结构](part-1-lua-luajit/1-lua_basics/control_structrues.md)
      - [if/else](part-1-lua-luajit/1-lua_basics/if_else.md)
      - [while](part-1-lua-luajit/1-lua_basics/while.md)
      - [repeat](part-1-lua-luajit/1-lua_basics/repeat.md)
      - [for](part-1-lua-luajit/1-lua_basics/for.md)
      - [break，return 和 goto](part-1-lua-luajit/1-lua_basics/break.md)
    - [Lua 函数](part-1-lua-luajit/1-lua_basics/function_descrip.md)
      - [函数的定义](part-1-lua-luajit/1-lua_basics/function_define.md)
      - [函数的参数](part-1-lua-luajit/1-lua_basics/function_parameter.md)
      - [函数返回值](part-1-lua-luajit/1-lua_basics/function_result.md)
      - [全动态函数调用](part-1-lua-luajit/1-lua_basics/call_user_func_array.md)
    - [模块](part-1-lua-luajit/1-lua_basics/module.md)
    - [String 库](part-1-lua-luajit/1-lua_basics/string_library.md)
    - [Table 库](part-1-lua-luajit/1-lua_basics/table_library.md)
    - [日期时间函数](part-1-lua-luajit/1-lua_basics/time_date_function.md)
    - [Numerals 库](part-1-lua-luajit/1-lua_basics/math_library.md)
    - [文件操作](part-1-lua-luajit/1-lua_basics/file.md)
  - [二，Lua 高阶](part-1-lua-luajit/2-lua_advanced/abstract.md)
    - [元表](part-1-lua-luajit/2-lua_advanced/metatable.md)
    - [面向对象编程](part-1-lua-luajit/2-lua_advanced/object_oriented.md)
    - [局部变量](part-1-lua-luajit/2-lua_advanced/local.md)
    - [判断数组大小](part-1-lua-luajit/2-lua_advanced/array_size.md)
    - [非空判断](part-1-lua-luajit/2-lua_advanced/not_nil.md)
    - [正则表达式](part-1-lua-luajit/2-lua_advanced/regex.md)
    - [虚变量](part-1-lua-luajit/2-lua_advanced/dummy_var.md)
    - [抵制使用 module() 定义模块](part-1-lua-luajit/2-lua_advanced/not_use_module.md)
    - [调用代码前先定义函数](part-1-lua-luajit/2-lua_advanced/function_before_use.md)
    - [点号与冒号操作符的区别](part-1-lua-luajit/2-lua_advanced/dot_diff.md)
    - [module 是邪恶的](part-1-lua-luajit/2-lua_advanced/module_is_evil.md)
    - [FFI](part-1-lua-luajit/2-lua_advanced/FFI.md)
  - [三，LuaJIT](part-1-lua-luajit/3-luaJIT/abstract.md)
    - [什么是 JIT](part-1-lua-luajit/3-luaJIT/what_jit.md)
    - [LuaJIT 的优化](brief.md)
    - [OpenResty 维护的 LuaJIT 的分支](part-1-lua-luajit/3-luaJIT/or_branch.md)
    - [如何完成 bit 操作](part-1-lua-luajit/3-luaJIT/bit_brief.md)
      - [一，复习二进制补码](part-1-lua-luajit/3-luaJIT/bit_two's_complement.md)
      - [二，复习位运算](part-1-lua-luajit/3-luaJIT/bit_operations_review.md)
      - [三，LuaJIT 和 Lua BitOp Api](part-1-lua-luajit/3-luaJIT/bit_LuaJIT_BitOp_Api.md)
      - [四，位运算算法实例](part-1-lua-luajit/3-luaJIT/bit_bitwise_operation_example.md)
      - [五，Lua BitOp 的安装](part-1-lua-luajit/3-luaJIT/bit_bitop_installation.md)
      - [六，操作语义和基本原理](part-1-lua-luajit/3-luaJIT/bit_bitop_semantics.md)
- [第二部分 Nginx 和 ngx_lua](part-2-nginx/synopsis.md)
  - [一，Nginx 基础](part-2-nginx/1-ngx/abstract.md)
    - [Nginx 新手起步](part-2-nginx/1-ngx/nginx_brief.md)
    - [location 匹配规则](part-2-nginx/1-ngx/nginx_local_pcre.md)
    - [静态文件服务](part-2-nginx/1-ngx/static_file.md)
    - [日志](part-2-nginx/1-ngx/nginx_log.md)
    - [反向代理](part-2-nginx/1-ngx/reverse_proxy.md)
    - [负载均衡](part-2-nginx/1-ngx/balancer.md)
    - [陷阱和常见错误](part-2-nginx/1-ngx/pitfalls_and_common_mistakes.md)
  - [二，LuaNginxModule](part-2-nginx/2-ngx_lua/abstract.md)
    - [执行阶段概念](part-2-nginx/2-ngx_lua/phase.md)
    - [正确的记录日志](part-2-nginx/2-ngx_lua/log.md)
    - [热装载代码](part-2-nginx/2-ngx_lua/hot_load.md)
    - [阻塞操作](part-2-nginx/2-ngx_lua/block_io.md)
    - [缓存](part-2-nginx/2-ngx_lua/cache.md)
    - [sleep](part-2-nginx/2-ngx_lua/sleep.md)
    - [定时任务](part-2-nginx/2-ngx_lua/timer.md)
    - [禁止某些终端访问](part-2-nginx/2-ngx_lua/allow_deny.md)
    - [请求返回后继续执行](part-2-nginx/2-ngx_lua/continue_after_eof.md)
    - [调试](part-2-nginx/2-ngx_lua/debug.md)
    - [请求中断后的处理](part-2-nginx/2-ngx_lua/on_abort.md)
    - [我的 lua 代码需要调优么](part-2-nginx/2-ngx_lua/lua_opt.md)
    - [变量的共享范围](part-2-nginx/2-ngx_lua/lua-variable-scope.md)
    - [动态限速](part-2-nginx/2-ngx_lua/lua-limit.md)
    - [shared.dict 非队列性质](part-2-nginx/2-ngx_lua/shared_get_keys.md)
    - [正确使用长链接](part-2-nginx/2-ngx_lua/keepalive.md)
    - [如何引用第三方 resty 库](part-2-nginx/2-ngx_lua/how_use_third_lib.md)
    - [典型应用场景](part-2-nginx/2-ngx_lua/use_case.md)
    - [lua_socket](part-2-nginx/2-ngx_lua/lua_socket.md)
    - [lua_coroutines](part-2-nginx/2-ngx_lua/lua_coroutines.md)
    - [怎样理解 cosocket](part-2-nginx/2-ngx_lua/whats_cosocket.md)
    - [如何安全启动唯一实例的 timer](part-2-nginx/2-ngx_lua/how_one_instance_time.md)
    - [如何正确的解析域名](part-2-nginx/2-ngx_lua/resolve_the_domain_name.md)
    - [四层与七层](part-2-nginx/2-ngx_lua/tcpip_four_osi_seven_protocol.md)
- [第三部分 OpenResty 和生态周边](part-3-openresty/synopsis.md)
  - [一，OpenResty 安装和基本用法](part-3-openresty/1-install-base/abstract.md)
    - [环境搭建](part-3-openresty/1-install-base/install.md)
      - [Windows 平台](part-3-openresty/1-install-base/install_on_windows.md)
      - [CentOS 平台](part-3-openresty/1-install-base/install_on_centos.md)
      - [Ubuntu 平台](part-3-openresty/1-install-base/install_on_ubuntu.md)
      - [Mac OS X 平台](part-3-openresty/1-install-base/install_osx.md)
      - [Docker 容器方式](part-3-openresty/1-install-base/install_by_docker.md)
    - [包管理工具](part-3-openresty/1-install-base/package_manager.md)
      - [opm](part-3-openresty/1-install-base/opm.md)
      - [LuaRocks](part-3-openresty/1-install-base/luarocks.md)
    - [Hello World](part-3-openresty/1-install-base/helloworld.md)
    - [与其他 location 配合](part-3-openresty/1-install-base/work_with_location.md)
    - [获取 uri 参数](part-3-openresty/1-install-base/get_url_param.md)
    - [获取请求 body](part-3-openresty/1-install-base/get_req_body.md)
    - [输出响应体](part-3-openresty/1-install-base/response.md)
    - [日志输出](part-3-openresty/1-install-base/log_response.md)
    - [使用 Nginx 内置绑定变量](part-3-openresty/1-install-base/inline_var.md)
    - [子查询](part-3-openresty/1-install-base/sub_request.md)
    - [不同阶段共享变量](part-3-openresty/1-install-base/share_var.md)
    - [防止 SQL 注入](part-3-openresty/1-install-base/safe_sql.md)
    - [如何发起新 HTTP 请求](part-3-openresty/1-install-base/how_request_http.md)
  - [二，OpenResty 与 SSL](part-3-openresty/2-ssl/abstract.md)
    - [HTTPS 时代](part-3-openresty/2-ssl/introduction.md)
    - [动态加载证书和 OCSP stapling](part-3-openresty/2-ssl/certificate.md)
    - [TLS session resumption](part-3-openresty/2-ssl/session_resumption.md)
  - [三，简单 API 框架](part-3-openresty/3-simple-applications/abstract.md)
    - [简单 API Server 框架](part-3-openresty/3-simple-applications/simple_api_framwork.md)
    - [搭建 API 网关](part-3-openresty/3-simple-applications/simple_api_gateway.md)
    - [实现 WAF 功能](part-3-openresty/3-simple-applications/simple_waf.md)
  - [四，Nginx C 模块](part-3-openresty/4-nginx-modules/abstract.md)
    - [lua-nginx-module](https://github.com/openresty/lua-nginx-module)
    - [lua-upstream-nginx-module](https://github.com/openresty/lua-upstream-nginx-module)
    - [memc-nginx-module](https://github.com/openresty/memc-nginx-module)
    - [redis2-nginx-module](https://github.com/openresty/redis2-nginx-module)
    - [set-misc-nginx-module](https://github.com/openresty/set-misc-nginx-module)
    - [PostgresNginxModule](part-3-openresty/4-nginx-modules/postgres.md)
      - [调用方式简介](part-3-openresty/4-nginx-modules/postgres/how_to_use.md)
      - [不支持事务](part-3-openresty/4-nginx-modules/postgres/not_support_transaction.md)
      - [超时](part-3-openresty/4-nginx-modules/postgres/timeout.md)
      - [健康监测](part-3-openresty/4-nginx-modules/postgres/health_check.md)
      - [SQL 注入](part-3-openresty/4-nginx-modules/postgres/sql_inject.md)
  - [五，Lua-resty 库](part-3-openresty/5-lua-resty-librarys/abstract.md)
    - [lua-resty-http](https://github.com/openresty/lua-resty-memcached)
    - [lua-resty-mqtt](https://github.com/ahlfors/lua-resty-mqtt)
    - [lua-resty-string](https://github.com/openresty/lua-resty-string)
    - [lua-resty-healthcheck](https://github.com/Kong/lua-resty-healthcheck/)
    - [lua-cjson](https://github.com/openresty/lua-cjson)
      - [json 解析的异常捕获]([p3]/lua-resty-librarys/json/parse_exception.md)
      - [稀疏数组]([p3]/lua-resty-librarys/json/sparse_array.md)
      - [空 table 编码为 array 还是 object]([p3]/lua-resty-librarys/json/array_or_object.md)
    - [lua-resty-dns]([p3]/lua-resty-librarys/dns/main.md)
      - [使用动态 DNS 来完成 HTTP 请求]([p3]/lua-resty-librarys/dns/use_dynamic_dns.md)
    - [lua-resty-lock](https://github.com/openresty/lua-resty-lock)
      - [缓存失效风暴](lock/cache-miss-storm.md)
    - [lua-resty-redis](https://github.com/openresty/lua-resty-redis/)
      - [访问有授权验证的 Redis]([p3]/lua-resty-librarys/redis/auth_connect.md)
      - [select+set_keepalive 组合操作引起的数据读写错误]([p3]/lua-resty-librarys/redis/select-keeplive.md)
      - [redis 接口的二次封装（简化建连、拆连等细节）]([p3]/lua-resty-librarys/redis/out_package.md)
      - [redis 接口的二次封装（发布订阅）]([p3]/lua-resty-librarys/redis/pub_sub_package.md)
      - [pipeline 压缩请求数量]([p3]/lua-resty-librarys/redis/pipeline.md)
      - [script 压缩复杂请求]([p3]/lua-resty-librarys/redis/script.md)
      - [动态生成的 lua-resty-redis 模块方法]([p3]/lua-resty-librarys/redis/dynamic_redis_module_method.md)
    - [lua-resty-redis-connector](https://github.com/pintsized/lua-resty-redis-connector)
    - [lua-resty-etcd](https://github.com/api7/lua-resty-etcd)
    - [lua-resty-mysql](https://github.com/openresty/lua-resty-mysql)
    - [lua-resty-kafka](https://github.com/doujiang24/lua-resty-kafka)
    - [lua-resty-beanstalkd](https://github.com/bakins/lua-resty-beanstalkd)
- [第四部分 测试、调优和工具]([p4]/1-testing/synopsis.md)
  - [一，测试]([p4]/1-testing/test.md)
    - [Test::Nginx](https://metacpan.org/release/Test-Nginx)
    - [代码静态分析]([p4]/1-testing/static_analysis.md)
    - [单元测试]([p4]/1-testing/unit_test.md)
    - [代码覆盖率]([p4]/1-testing/coverage.md)
    - [API 测试]([p4]/1-testing/api_test.md)
    - [性能测试]([p4]/1-testing/performance_test.md)
    - [持续集成]([p4]/1-testing/ci.md)
    - [灰度发布]([p4]/1-testing/abtest.md)
      - [分流引擎设计]([p4]/1-testing/abtest/1.md)
      - [控制台开发]([p4]/1-testing/abtest/2.md)
      - [向运维平台发展]([p4]/1-testing/abtest/3.md)
  - [二，Web 服务]([p4]/2-web-server/web.md)
    - [API 的设计]([p4]/2-web-server/api.md)
    - [数据合法性检测]([p4]/2-web-server/check_data_valid.md)
    - [协议无痛升级]([p4]/2-web-server/switch_protocol.md)
    - [代码规范]([p4]/2-web-server/code_style.md)
    - [连接池]([p4]/2-web-server/conn_pool.md)
    - [C10K 编程]([p4]/2-web-server/c10k.md)
    - [TIME_WAIT 问题]([p4]/2-web-server/time_wait.md)
    - [与 Docker 使用的网络瓶颈]([p4]/2-web-server/docker.md)
  - [三，火焰图]([p4]/3-flame-graph/flame_graph.md)
    - [什么是火焰图]([p4]/3-flame-graph/what.md)
    - [什么时候使用]([p4]/3-flame-graph/when.md)
    - [如何安装火焰图生成工具]([p4]/3-flame-graph/install.md)
    - [如何定位问题]([p4]/3-flame-graph/how.md)
    - [拓展阅读]([p4]/3-flame-graph/other.md)
    - [FAQ]([p4]/3-flame-graph/faq.md)
  - [四，调试工具]([p4]/4-debug-tools/abstract.md)
    - [inspect](https://github.com/kikito/inspect.lua)
    - [stapxx](https://github.com/openresty/stapxx) (已停止维护)
    - [openresty-systemtap-toolkit](https://github.com/openresty/openresty-systemtap-toolkit) (已停止维护)
  - [五，工程化工具]([p5]/5-engineering-tools/abstract.md)
    - [openresty-devel-utils](https://github.com/openresty/openresty-devel-utils)
    - [lj-releng](https://github.com/openresty/openresty-devel-utils/blob/master/lj-releng)
    - [reindex](https://github.com/openresty/openresty-devel-utils/blob/master/reindex)
    - [opsboy](https://github.com/openresty/opsboy)
- [第五部分 项目和资源收集]([p5]/synopsis.md)
  - [一，资源收集]([p5]/1-resources/abstract.md)
    - [awesome-resty](https://github.com/bungle/awesome-resty) (强烈推荐)
    - [awesome-lua](https://github.com/forhappy/awesome-lua)
    - [awesome-lua](https://github.com/LewisJEllis/awesome-lua)
    - [nginx-resources](https://github.com/fcambus/nginx-resources)
    - [lua-nginx-redis](https://github.com/Tinywan/lua-nginx-redis)
  - [二，网关应用]([p5]/2-gateway-apps/abstract.md)
    - [Apache APISIX](https://github.com/apache/apisix)
    - [Kong](https://github.com/Kong/kong)
    - [Orange](https://github.com/orlabs/orange)
    - [基于动态策略的灰度发布系统](https://github.com/YazaiHu/ABTestingGateway)
  - [三，Web 和 Api 框架]([p5]/3-web-api-frameworks/abstract.md)
    - [gin](http://gin.io/)
    - [Lapis](https://github.com/leafo/lapis)
    - [Lor](https://github.com/sumory/lor)
    - [nana](https://github.com/horan-geeker/nana)
    - [vanilla](https://github.com/idevz/vanilla)
  - [四，站点收集]([p5]/4-websites/abstract.md)
    - [lua.org](https://www.lua.org/)
    - [luajit.org](https://luajit.org/)
    - [lua-china.com](https://lua-china.com/)
    - [云风翻译的 Lua 5.3 手册](https://cloudwu.github.io/lua53doc/)
    - [Getting Started With Lua](http://gamedevgeek.com/tutorials/getting-started-with-lua/)
    - [菜鸟 Lua 教程](https://www.runoob.com/lua/lua-tutorial.html)
    - [lua.sqlite.org](http://lua.sqlite.org/index.cgi/index)
    - [lua-users.org](http://lua-users.org/wiki/LuaUses)
    - [keplerproject.org](http://www.keplerproject.org/en/Lua/)
    - [keplerproject](http://keplerproject.github.io/cgilua/)
  - [五，其他应用实例]([p5]/5-other-apps/abstract.md)
    - [casper](https://github.com/Yelp/casper)
    - [lua-casbin](https://github.com/casbin/lua-casbin)
    - [VeryNginx](https://github.com/alexazhou/VeryNginx)
    - [openresty-im](https://github.com/poembro/openresty-im)
  - [六，商业产品](https://openresty.com.cn/cn/)
    - [OpenResty Edge™](https://openresty.com/en/edge/)
    - [OpenResty XRay™](https://openresty.com/en/xray/)
    - [OpenResty OpsLang™](https://openresty.com/en/opslang/)

[p1]: part-1-lua-luajit
[p2]: part-2-nginx
[p3]: part-3-openresty
[p4]: part-4-testing-tuning
[p5]: part-5-projects-resources
